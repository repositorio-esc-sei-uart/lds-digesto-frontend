<div class="user-management-container">
    <h2>
        <span class="material-icons title-icon">group</span>
        Gesti√≥n de Usuarios
    </h2>

    <button class="btn-NuevoUser" (click)="goToNewUser()">
        <span class="material-icons button-icon">person_add</span>
        Nuevo Usuario
    </button>
    
    <div class="table-container">

        <table mat-table [dataSource]="dataSource" class="user-table">

            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef> ID </th>
                <td mat-cell *matCellDef="let user"> {{ user.idUsuario }} </td>
            </ng-container>

            <ng-container matColumnDef="legajo">
                <th mat-header-cell *matHeaderCellDef> Legajo </th>
                <td mat-cell *matCellDef="let user"> {{ user.legajo }} </td>
            </ng-container>

            <ng-container matColumnDef="nombre">
                <th mat-header-cell *matHeaderCellDef> Nombre </th>
                <td mat-cell *matCellDef="let user"> {{ user.nombre }} </td>
            </ng-container>

            <ng-container matColumnDef="apellido">
                <th mat-header-cell *matHeaderCellDef> Apellido </th>
                <td mat-cell *matCellDef="let user"> {{ user.apellido }} </td>
            </ng-container>

            <ng-container matColumnDef="email">
                <th mat-header-cell *matHeaderCellDef> Email </th>
                <td mat-cell *matCellDef="let user"> {{ user.email }} </td>
            </ng-container>

            <ng-container matColumnDef="rol">
                <th mat-header-cell *matHeaderCellDef> Rol </th>
                <td mat-cell *matCellDef="let user"> {{ user.rol?.nombre }} </td>
            </ng-container>

            <ng-container matColumnDef="estado">
                <th mat-header-cell *matHeaderCellDef> Estado </th>
                <td mat-cell *matCellDef="let user">
                    <span [ngClass]="getStatusClass(user.estadoU?.nombre)">
                        {{ user.estadoU?.nombre }}
                    </span>
                </td>
            </ng-container>

            <ng-container matColumnDef="acciones">
                <th mat-header-cell *matHeaderCellDef> Acciones </th>
                <td mat-cell *matCellDef="let user" class="actions-cell">
                    <button mat-icon-button class="btn-action edit" (click)="abrirFormulario(user)" matTooltip="Editar">
                        <span class="material-icons">edit</span>
                    </button>
                    <button mat-icon-button class="btn-action delete" (click)="onDelete(user.idUsuario, user.nombre)" matTooltip="Eliminar">
                        <span class="material-icons">delete</span>
                    </button>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

            <tr class="mat-row-no-data" *matNoDataRow>
                <td [attr.colspan]="displayedColumns.length" class="no-data">No Existen Usuarios</td>
            </tr>

        </table>
        <div *ngIf="isLoading" class="loading-shade">
            <mat-spinner></mat-spinner>
        </div>

    </div>
</div>